{"ast":null,"code":"import React from'react';import{Routes,Route,Navigate}from'react-router-dom';import{useAuth}from'./contexts/AuthContext';import Navbar from'./components/Navbar';import Login from'./components/auth/Login';import Register from'./components/auth/Register';import AdminDashboard from'./components/admin/AdminDashboard';import UserDashboard from'./components/user/UserDashboard';import StoreOwnerDashboard from'./components/storeOwner/StoreOwnerDashboard';import StoreList from'./components/stores/StoreList';import UserManagement from'./components/admin/UserManagement';import StoreManagement from'./components/admin/StoreManagement';import RatingManagement from'./components/admin/RatingManagement';import LoadingSpinner from'./components/common/LoadingSpinner';import{Toaster}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrivateRoute=_ref=>{let{children,allowedRoles=[]}=_ref;const{user,loading,isAuthenticated}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}if(allowedRoles.length>0&&!allowedRoles.includes(user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"});}return children;};const App=()=>{const{loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(DashboardRouter,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/stores\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(StoreList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/users\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(UserManagement,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/stores\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(StoreManagement,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/ratings\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(RatingManagement,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})})]})}),/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false,gutter:8,toastOptions:{duration:2000,className:'',style:{background:'#fff',color:'#363636',boxShadow:'0 4px 12px rgba(0,0,0,0.15)'}}})]});};// Component to route to appropriate dashboard based on user role\nconst DashboardRouter=()=>{const{user}=useAuth();switch(user.role){case'admin':return/*#__PURE__*/_jsx(AdminDashboard,{});case'store_owner':return/*#__PURE__*/_jsx(StoreOwnerDashboard,{});case'user':return/*#__PURE__*/_jsx(UserDashboard,{});default:return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}};export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","useAuth","Navbar","Login","Register","AdminDashboard","UserDashboard","StoreOwnerDashboard","StoreList","UserManagement","StoreManagement","RatingManagement","LoadingSpinner","Toaster","jsx","_jsx","jsxs","_jsxs","PrivateRoute","_ref","children","allowedRoles","user","loading","isAuthenticated","to","length","includes","role","App","className","path","element","DashboardRouter","position","reverseOrder","gutter","toastOptions","duration","style","background","color","boxShadow"],"sources":["C:/Users/ayush bhure/OneDrive/Desktop/backup/App/frontend/src/App.js"],"sourcesContent":["import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { useAuth } from './contexts/AuthContext';\nimport Navbar from './components/Navbar';\nimport Login from './components/auth/Login';\nimport Register from './components/auth/Register';\nimport AdminDashboard from './components/admin/AdminDashboard';\nimport UserDashboard from './components/user/UserDashboard';\nimport StoreOwnerDashboard from './components/storeOwner/StoreOwnerDashboard';\nimport StoreList from './components/stores/StoreList';\nimport UserManagement from './components/admin/UserManagement';\nimport StoreManagement from './components/admin/StoreManagement';\nimport RatingManagement from './components/admin/RatingManagement';\nimport LoadingSpinner from './components/common/LoadingSpinner';\nimport { Toaster } from 'react-hot-toast';\n\nconst PrivateRoute = ({ children, allowedRoles = [] }) => {\n  const { user, loading, isAuthenticated } = useAuth();\n\n  if (loading) {\n    return <LoadingSpinner />;\n  }\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user.role)) {\n    return <Navigate to=\"/dashboard\" />;\n  }\n\n  return children;\n};\n\nconst App = () => {\n  const { loading } = useAuth();\n\n  if (loading) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <div className=\"App\">\n      <Navbar />\n      <div className=\"container\">\n        <Routes>\n          \n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n\n          <Route\n            path=\"/dashboard\"\n            element={\n              <PrivateRoute>\n                <DashboardRouter />\n              </PrivateRoute>\n            }\n          />\n\n          <Route\n            path=\"/stores\"\n            element={\n              <PrivateRoute>\n                <StoreList />\n              </PrivateRoute>\n            }\n          />\n\n          {/* Admin routes */}\n          <Route\n            path=\"/admin/users\"\n            element={\n              <PrivateRoute allowedRoles={['admin']}>\n                <UserManagement />\n              </PrivateRoute>\n            }\n          />\n\n          <Route\n            path=\"/admin/stores\"\n            element={\n              <PrivateRoute allowedRoles={['admin']}>\n                <StoreManagement />\n              </PrivateRoute>\n            }\n          />\n\n          <Route\n            path=\"/admin/ratings\"\n            element={\n              <PrivateRoute allowedRoles={['admin']}>\n                <RatingManagement />\n              </PrivateRoute>\n            }\n          />\n\n          {/* Default redirect */}\n          <Route path=\"/\" element={<Navigate to=\"/dashboard\" />} />\n          <Route path=\"*\" element={<Navigate to=\"/dashboard\" />} />\n        </Routes>\n      </div>\n      <Toaster\n        position=\"top-center\"\n        reverseOrder={false}\n        gutter={8}\n        toastOptions={{\n          duration: 2000,\n          className: '',\n          style: {\n            background: '#fff',\n            color: '#363636',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\n          }\n        }}\n      />\n    </div>\n  );\n};\n\n// Component to route to appropriate dashboard based on user role\nconst DashboardRouter = () => {\n  const { user } = useAuth();\n\n  switch (user.role) {\n    case 'admin':\n      return <AdminDashboard />;\n    case 'store_owner':\n      return <StoreOwnerDashboard />;\n    case 'user':\n      return <UserDashboard />;\n    default:\n      return <Navigate to=\"/login\" />;\n  }\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}